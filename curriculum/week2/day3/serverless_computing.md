# 서버리스 컴퓨팅 개념

## 개요
서버리스 컴퓨팅은 개발자가 서버를 프로비저닝하거나 관리할 필요 없이 애플리케이션을 구축하고 실행할 수 있게 해주는 클라우드 컴퓨팅 실행 모델입니다. 이 강의에서는 서버리스 컴퓨팅의 기본 개념, 이점, AWS의 서버리스 서비스, 그리고 서버리스 아키텍처를 설계하는 방법을 알아봅니다.

## 학습 목표
- 서버리스 컴퓨팅의 개념과 이점 이해
- AWS의 주요 서버리스 서비스 학습
- 서버리스 아키텍처 패턴 및 사용 사례 이해
- 서버리스 애플리케이션 설계 및 구현 방법 습득
- 서버리스 아키텍처의 고가용성 및 확장성 설계 방법 이해

## 서버리스 컴퓨팅이란?

### 기본 개념
서버리스 컴퓨팅은 클라우드 제공업체가 서버의 프로비저닝, 유지 관리, 확장을 동적으로 관리하는 클라우드 컴퓨팅 실행 모델입니다. 개발자는 서버 인프라를 관리하지 않고 코드에만 집중할 수 있습니다.

**비유**: 서버리스는 마치 전기 공급망과 같습니다. 전기를 사용하기 위해 발전소를 직접 구축하고 관리할 필요 없이, 필요할 때 콘센트에 플러그를 꽂아 사용하고 사용한 만큼만 비용을 지불합니다.

### "서버리스"의 의미
"서버리스"라는 용어는 서버가 없다는 의미가 아니라, 개발자가 서버를 관리할 필요가 없다는 의미입니다. 서버는 여전히 존재하지만, 클라우드 제공업체가 관리합니다.

**비유**: 이는 마치 택시를 이용하는 것과 같습니다. 차량을 소유하고 유지 관리할 필요 없이 필요할 때 서비스를 이용하고 이동한 거리에 대해서만 비용을 지불합니다.

### 서버리스 컴퓨팅의 주요 특징

#### 1. 자동 확장
요청 수에 따라 자동으로 확장되어 트래픽 급증에 대응합니다.

**비유**: 이는 마치 수도꼭지와 같습니다. 물을 많이 틀면 더 많은 물이 나오고, 적게 틀면 적은 물이 나옵니다. 사용량에 따라 자동으로 조절됩니다.

#### 2. 사용한 만큼만 지불
실제로 코드가 실행된 시간과 리소스에 대해서만 비용을 지불합니다.

**비유**: 이는 마치 주차장에서 주차한 시간만큼만 요금을 지불하는 것과 같습니다. 차를 사용하지 않을 때는 비용이 발생하지 않습니다.

#### 3. 이벤트 기반 실행
코드는 특정 이벤트(HTTP 요청, 파일 업로드, 데이터베이스 변경 등)에 응답하여 실행됩니다.

**비유**: 이는 마치 모션 센서 조명과 같습니다. 누군가 지나갈 때만 조명이 켜지고, 아무도 없을 때는 꺼져 있습니다.

#### 4. 상태 비저장(Stateless)
각 실행은 독립적이며 이전 실행의 상태를 유지하지 않습니다.

**비유**: 이는 마치 일회용 카메라와 같습니다. 각 카메라는 독립적으로 작동하며, 다른 카메라의 상태에 영향을 받지 않습니다.

#### 5. 관리 오버헤드 감소
서버 관리, 패치, 확장 등의 운영 작업이 필요 없습니다.

**비유**: 이는 마치 호텔에 머무는 것과 같습니다. 건물 유지 관리, 청소, 보안 등을 걱정할 필요 없이 객실만 이용하면 됩니다.

## 서버리스 컴퓨팅의 이점

### 1. 운영 복잡성 감소
서버 관리, 패치, 확장 등의 운영 작업이 필요 없어 개발자는 비즈니스 로직에 집중할 수 있습니다.

**비유**: 이는 마치 자동차를 렌트하는 것과 같습니다. 정비, 보험, 등록 등을 걱정할 필요 없이 운전에만 집중할 수 있습니다.

### 2. 비용 최적화
사용한 리소스에 대해서만 비용을 지불하므로, 유휴 리소스에 대한 비용이 발생하지 않습니다.

**비유**: 이는 마치 종량제 요금제와 같습니다. 사용한 만큼만 지불하고, 사용하지 않을 때는 비용이 발생하지 않습니다.

### 3. 빠른 배포 및 개발
인프라 관리가 필요 없어 개발 및 배포 주기가 단축됩니다.

**비유**: 이는 마치 즉석 식품과 같습니다. 재료를 준비하고 요리하는 과정 없이 바로 먹을 수 있습니다.

### 4. 자동 확장성
트래픽에 따라 자동으로 확장되므로 수동 확장 구성이 필요 없습니다.

**비유**: 이는 마치 탄력적인 고무줄과 같습니다. 당기면 늘어나고 놓으면 원래 크기로 돌아갑니다.

### 5. 고가용성
여러 가용 영역에 자동으로 배포되어 단일 장애점이 없습니다.

**비유**: 이는 마치 여러 경로로 목적지에 도달할 수 있는 도로 네트워크와 같습니다. 한 경로가 막혀도 다른 경로로 이동할 수 있습니다.

## AWS의 주요 서버리스 서비스

### 1. AWS Lambda
서버를 프로비저닝하거나 관리하지 않고도 코드를 실행할 수 있는 이벤트 기반 컴퓨팅 서비스입니다.

**주요 특징**:
- 다양한 프로그래밍 언어 지원 (Node.js, Python, Java, Go, .NET, Ruby)
- 이벤트 소스와 통합 (S3, DynamoDB, Kinesis, SNS, API Gateway 등)
- 최대 15분의 실행 시간
- 자동 확장 및 고가용성
- 세분화된 권한 제어

**비유**: Lambda는 마치 주문형 작업자와 같습니다. 필요할 때만 호출되어 특정 작업을 수행하고, 작업이 완료되면 사라집니다.

### 2. Amazon API Gateway
API를 생성, 게시, 유지 관리, 모니터링 및 보호하기 위한 완전 관리형 서비스입니다.

**주요 특징**:
- RESTful API 및 WebSocket API 지원
- 트래픽 관리, 권한 부여, 모니터링, API 버전 관리
- AWS Lambda와의 원활한 통합
- 요청/응답 변환 및 검증
- 캐싱 및 스로틀링

**비유**: API Gateway는 마치 호텔 프론트 데스크와 같습니다. 손님(클라이언트)의 요청을 받아 적절한 서비스(Lambda 함수)로 전달합니다.

### 3. Amazon DynamoDB
완전 관리형 NoSQL 데이터베이스 서비스로, 원활한 확장성과 빠른 성능을 제공합니다.

**주요 특징**:
- 자동 확장 및 고가용성
- 밀리초 단위의 응답 시간
- 서버리스 애플리케이션을 위한 온디맨드 용량 모드
- 트랜잭션 지원
- 글로벌 테이블 및 백업

**비유**: DynamoDB는 마치 자동으로 확장되는 창고와 같습니다. 물건(데이터)이 많아지면 자동으로 공간이 늘어나고, 적어지면 줄어듭니다.

### 4. Amazon S3 (Simple Storage Service)
확장 가능한 객체 스토리지 서비스로, 정적 웹 사이트 호스팅, 데이터 백업, 애플리케이션 데이터 저장 등에 사용됩니다.

**주요 특징**:
- 무제한 스토리지 용량
- 높은 내구성 및 가용성
- 정적 웹 사이트 호스팅
- 이벤트 알림
- 수명 주기 관리

**비유**: S3는 마치 무한히 확장 가능한 창고와 같습니다. 어떤 크기의 물건이든 얼마든지 저장할 수 있고, 필요할 때 언제든지 접근할 수 있습니다.

### 5. AWS Step Functions
분산 애플리케이션의 구성 요소를 시각적 워크플로로 조정할 수 있는 서버리스 오케스트레이션 서비스입니다.

**주요 특징**:
- 시각적 워크플로 디자이너
- 상태 추적 및 오류 처리
- 병렬 처리 및 조건부 로직
- 장기 실행 워크플로 지원
- AWS 서비스와의 통합

**비유**: Step Functions는 마치 영화 감독과 같습니다. 각 배우(Lambda 함수)가 언제 어떤 순서로 연기해야 하는지 지시합니다.

### 6. Amazon EventBridge
이벤트 기반 애플리케이션을 쉽게 구축할 수 있는 서버리스 이벤트 버스 서비스입니다.

**주요 특징**:
- 이벤트 소스와 대상 간의 라우팅
- 이벤트 필터링 및 변환
- 스케줄링된 이벤트
- 서드파티 SaaS 애플리케이션과의 통합
- 아카이브 및 재생

**비유**: EventBridge는 마치 우체국과 같습니다. 다양한 발신자(이벤트 소스)로부터 메시지를 받아 적절한 수신자(대상)에게 전달합니다.

### 7. Amazon SNS (Simple Notification Service) 및 SQS (Simple Queue Service)
메시지 전송 및 대기열 서비스로, 분산 시스템 간의 통신을 가능하게 합니다.

**주요 특징**:
- SNS: 푸시 기반 메시지 전송
- SQS: 풀 기반 메시지 대기열
- 높은 내구성 및 가용성
- 메시지 필터링 및 배치 처리
- 지연 대기열 및 데드 레터 대기열

**비유**: SNS는 마치 방송국과 같고, SQS는 마치 우편함과 같습니다. SNS는 모든 구독자에게 메시지를 동시에 전송하고, SQS는 메시지를 저장해두고 소비자가 준비되었을 때 처리할 수 있게 합니다.

## 서버리스 아키텍처 패턴

### 1. 이벤트 기반 처리
이벤트가 발생할 때 함수가 트리거되어 처리하는 패턴입니다.

**예시**: S3에 파일이 업로드되면 Lambda 함수가 트리거되어 이미지 처리 또는 데이터 변환을 수행합니다.

**비유**: 이는 마치 도미노 효과와 같습니다. 첫 번째 도미노(이벤트)가 쓰러지면 연쇄적으로 다음 도미노(함수)가 작동합니다.

### 2. API 백엔드
API Gateway와 Lambda를 사용하여 웹 및 모바일 애플리케이션을 위한 확장 가능한 백엔드를 구축하는 패턴입니다.

**예시**: 모바일 앱에서 API Gateway를 통해 요청을 보내면 Lambda 함수가 처리하고 DynamoDB에서 데이터를 조회하여 응답합니다.

**비유**: 이는 마치 레스토랑의 주문 시스템과 같습니다. 손님(클라이언트)이 웨이터(API Gateway)에게 주문하면 요리사(Lambda)가 요리를 준비하고 웨이터가 다시 손님에게 전달합니다.

### 3. 데이터 처리 파이프라인
여러 단계의 데이터 처리를 조정하는 패턴입니다.

**예시**: Kinesis로 스트리밍 데이터를 수집하고, Lambda로 처리한 후, S3에 저장하고, Athena로 분석합니다.

**비유**: 이는 마치 자동차 조립 라인과 같습니다. 원자재가 여러 단계의 처리 과정을 거쳐 최종 제품이 됩니다.

### 4. 웹 애플리케이션
정적 웹 콘텐츠와 동적 API를 결합하여 완전한 웹 애플리케이션을 구축하는 패턴입니다.

**예시**: S3에서 정적 콘텐츠(HTML, CSS, JavaScript)를 호스팅하고, API Gateway와 Lambda로 동적 API를 제공하며, Cognito로 인증을 처리합니다.

**비유**: 이는 마치 현대적인 쇼핑몰과 같습니다. 건물(S3)은 고정되어 있지만, 내부의 상점(Lambda 함수)은 필요에 따라 변경될 수 있습니다.

### 5. 실시간 파일 처리
파일이 업로드되면 자동으로 처리하는 패턴입니다.

**예시**: S3에 이미지가 업로드되면 Lambda 함수가 트리거되어 썸네일을 생성하고 메타데이터를 추출하여 DynamoDB에 저장합니다.

**비유**: 이는 마치 우편물 분류 시스템과 같습니다. 우편물이 도착하면 자동으로 분류되고 적절한 처리가 이루어집니다.

### 6. 스케줄링된 작업
정기적으로 실행되는 작업을 관리하는 패턴입니다.

**예시**: EventBridge 스케줄러를 사용하여 매일 특정 시간에 Lambda 함수를 실행하여 데이터 백업 또는 보고서 생성을 수행합니다.

**비유**: 이는 마치 자동 스프링클러 시스템과 같습니다. 설정된 시간에 자동으로 작동하여 정원에 물을 줍니다.

## 서버리스 아키텍처 설계 고려 사항

### 1. 상태 관리
서버리스 함수는 기본적으로 상태 비저장(stateless)이므로, 상태를 외부 서비스에 저장해야 합니다.

**해결 방법**:
- DynamoDB를 사용한 데이터 저장
- ElastiCache를 사용한 캐싱
- S3를 사용한 파일 저장
- Step Functions를 사용한 워크플로 상태 관리

**비유**: 이는 마치 메모장을 사용하는 것과 같습니다. 중요한 정보는 메모장(외부 저장소)에 기록해두어야 나중에 참조할 수 있습니다.

### 2. 콜드 스타트
함수가 처음 호출되거나 장시간 사용되지 않은 후 호출될 때 발생하는 지연 시간입니다.

**최적화 방법**:
- 함수 크기 최소화
- 메모리 할당 증가
- 프로비저닝된 동시성 사용
- 웜업 전략 구현
- 적절한 런타임 선택

**비유**: 이는 마치 자동차 엔진을 시동하는 것과 같습니다. 차가운 엔진은 시동이 걸리는 데 시간이 더 걸리지만, 한번 워밍업되면 빠르게 반응합니다.

### 3. 제한 시간 및 메모리 제약
Lambda 함수는 실행 시간(최대 15분)과 메모리 할당(최대 10GB)에 제한이 있습니다.

**해결 방법**:
- 작업을 더 작은 함수로 분할
- Step Functions를 사용한 장기 실행 워크플로 조정
- 비동기 처리 패턴 사용
- 메모리 사용량 최적화

**비유**: 이는 마치 제한 시간이 있는 시험과 같습니다. 큰 문제는 작은 부분으로 나누어 효율적으로 해결해야 합니다.

### 4. 동시성 관리
많은 요청이 동시에 발생할 때 함수 인스턴스가 병렬로 실행됩니다.

**관리 방법**:
- 계정 수준 및 함수 수준의 동시성 제한 설정
- 예약된 동시성 구성
- 프로비저닝된 동시성 사용
- 대기열을 사용한 부하 평준화

**비유**: 이는 마치 놀이공원의 입장 관리와 같습니다. 너무 많은 사람이 한꺼번에 입장하면 혼잡해지므로, 입장 인원을 제한하고 대기열을 통해 관리합니다.

### 5. 비용 최적화
서버리스는 사용량 기반 요금 모델을 따르므로, 비용을 최적화하는 것이 중요합니다.

**최적화 방법**:
- 함수 실행 시간 최소화
- 적절한 메모리 할당
- 불필요한 함수 호출 줄이기
- 배치 처리 구현
- 캐싱 전략 사용

**비유**: 이는 마치 전기 요금을 절약하는 것과 같습니다. 필요하지 않을 때는 전등을 끄고, 에너지 효율이 높은 가전제품을 사용합니다.

### 6. 모니터링 및 디버깅
분산된 서버리스 아키텍처에서는 모니터링과 디버깅이 더 복잡해질 수 있습니다.

**해결 방법**:
- CloudWatch Logs 및 지표 활용
- X-Ray를 사용한 분산 추적
- 구조화된 로깅 구현
- 알림 및 경보 설정
- 로컬 테스트 및 에뮬레이션

**비유**: 이는 마치 복잡한 기계의 상태를 모니터링하는 것과 같습니다. 여러 센서와 게이지를 통해 시스템의 다양한 부분을 관찰하고 문제를 식별합니다.

## 서버리스 아키텍처의 고가용성 설계

### 1. 다중 가용 영역 배포
서버리스 서비스는 기본적으로 여러 가용 영역에 배포되어 단일 가용 영역 장애에 대한 복원력을 제공합니다.

**구현 방법**:
- Lambda 함수는 자동으로 여러 AZ에 배포됨
- DynamoDB 글로벌 테이블 사용
- S3 크로스 리전 복제 구성
- API Gateway 리전 엔드포인트 사용

**비유**: 이는 마치 여러 도시에 지점을 두는 것과 같습니다. 한 도시에 문제가 발생해도 다른 도시의 지점이 계속 운영됩니다.

### 2. 재시도 및 백오프 전략
일시적인 오류에 대응하기 위한 재시도 메커니즘을 구현합니다.

**구현 방법**:
- 지수 백오프 및 지터 알고리즘 사용
- 데드 레터 큐(DLQ) 구성
- 최대 재시도 횟수 설정
- 회로 차단기 패턴 구현

**비유**: 이는 마치 혼잡한 전화선에 다시 전화를 거는 것과 같습니다. 바로 다시 시도하지 않고 점점 더 긴 간격을 두고 재시도합니다.

### 3. 비동기 통신
시스템 구성 요소 간의 결합도를 낮추고 장애 격리를 향상시킵니다.

**구현 방법**:
- SQS를 사용한 메시지 대기열
- SNS를 사용한 이벤트 알림
- EventBridge를 사용한 이벤트 라우팅
- Step Functions를 사용한 워크플로 조정

**비유**: 이는 마치 이메일 통신과 같습니다. 발신자와 수신자가 동시에 온라인 상태일 필요 없이 메시지를 주고받을 수 있습니다.

### 4. 장애 격리
한 구성 요소의 장애가 전체 시스템에 영향을 미치지 않도록 설계합니다.

**구현 방법**:
- 마이크로서비스 아키텍처 채택
- 서비스별 리소스 할당
- 타임아웃 및 회로 차단기 구현
- 대체 경로 및 폴백 메커니즘 제공

**비유**: 이는 마치 배의 격벽과 같습니다. 한 구획에 물이 차도 다른 구획은 안전하게 유지됩니다.

### 5. 데이터 내구성
데이터 손실을 방지하고 복구 가능성을 보장합니다.

**구현 방법**:
- DynamoDB 백업 및 복원
- S3 버전 관리 및 복제
- 트랜잭션 및 ACID 준수
- 이벤트 소싱 패턴 구현

**비유**: 이는 마치 중요한 문서의 여러 사본을 다른 장소에 보관하는 것과 같습니다. 한 사본이 손상되어도 다른 사본에서 복구할 수 있습니다.

## 서버리스 아키텍처의 모범 사례

### 1. 함수 설계 모범 사례
- 단일 책임 원칙 준수
- 공유 코드를 레이어로 분리
- 환경 변수를 사용한 구성 관리
- 적절한 로깅 및 오류 처리
- 함수 크기 최소화

### 2. 보안 모범 사례
- 최소 권한 원칙 적용
- IAM 역할 및 정책 최적화
- 민감한 정보는 AWS Secrets Manager 또는 Parameter Store에 저장
- API Gateway에서 인증 및 권한 부여 구현
- 입력 검증 및 출력 이스케이프

### 3. 성능 최적화 모범 사례
- 적절한 메모리 할당
- 연결 풀링 및 재사용
- 캐싱 전략 구현
- 비동기 및 병렬 처리
- 배치 처리 활용

### 4. 비용 최적화 모범 사례
- 함수 실행 시간 최소화
- 불필요한 함수 호출 줄이기
- 적절한 서비스 선택
- 예약된 동시성 및 프로비저닝된 동시성 최적화
- 비용 모니터링 및 예산 설정

### 5. 운영 모범 사례
- 자동화된 배포 파이프라인 구축
- 버전 관리 및 별칭 사용
- 철저한 테스트 및 모니터링
- 점진적 배포 및 롤백 전략
- 문서화 및 지식 공유

## 결론
서버리스 컴퓨팅은 개발자가 서버 관리에 대한 부담 없이 애플리케이션을 구축하고 실행할 수 있게 해주는 강력한 패러다임입니다. AWS Lambda, API Gateway, DynamoDB 등의 서비스를 활용하면 확장성이 뛰어나고 비용 효율적인 애플리케이션을 구축할 수 있습니다. 서버리스 아키텍처를 설계할 때는 상태 관리, 콜드 스타트, 제한 시간, 동시성 등의 고려 사항을 염두에 두어야 하며, 고가용성을 위해 다중 가용 영역 배포, 재시도 전략, 비동기 통신, 장애 격리 등의 패턴을 적용해야 합니다. 서버리스 컴퓨팅은 적절한 사용 사례와 설계 패턴을 통해 개발 속도, 운영 효율성, 비용 최적화 등 다양한 이점을 제공합니다.

## 참고 자료
- [AWS Lambda 개발자 안내서](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html)
- [서버리스 애플리케이션 렌즈 - AWS Well-Architected Framework](https://docs.aws.amazon.com/wellarchitected/latest/serverless-applications-lens/welcome.html)
- [AWS 서버리스 아키텍처 패턴](https://aws.amazon.com/architecture/serverless/)
- [서버리스 컴퓨팅 모범 사례](https://docs.aws.amazon.com/lambda/latest/dg/best-practices.html)