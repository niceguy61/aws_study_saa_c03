# 다중 계정 관리 전략 및 AWS Organizations

## 개요
대부분의 기업과 조직은 AWS를 사용할 때 여러 개의 AWS 계정을 사용합니다. 이 강의에서는 다중 계정 전략의 필요성, AWS Organizations를 통한 다중 계정 관리 방법, 그리고 효과적인 다중 계정 구조 설계 방법에 대해 알아봅니다.

## 학습 목표
- 다중 계정 전략의 필요성과 이점 이해
- AWS Organizations의 주요 기능 및 구성 요소 파악
- 효과적인 다중 계정 구조 설계 원칙 학습
- 다중 계정 환경에서의 보안 및 거버넌스 모범 사례 이해
- 다중 계정 환경에서의 비용 관리 및 최적화 방법 학습

## 다중 계정 전략의 필요성

### 단일 계정 사용의 한계
AWS를 처음 시작할 때는 단일 계정으로 시작하는 것이 일반적이지만, 조직이 성장하고 AWS 사용이 증가함에 따라 단일 계정 접근 방식은 여러 한계에 직면합니다.

**비유**: 단일 AWS 계정만 사용하는 것은 한 집에 모든 가족 구성원이 같은 방을 사용하는 것과 같습니다. 처음에는 괜찮을 수 있지만, 가족이 커지면 프라이버시 문제, 공간 부족, 소음 등의 문제가 발생합니다.

**단일 계정의 주요 한계**:
- **보안 경계 부족**: 모든 리소스가 동일한 보안 경계 내에 있어 격리가 어려움
  - **쉬운 설명**: 한 사람이 실수로 중요한 서버를 삭제하면 모든 서비스에 영향을 미칠 수 있습니다.

- **권한 관리 복잡성**: 다양한 팀과 프로젝트에 대한 세분화된 권한 관리가 어려움
  - **쉬운 설명**: 모든 직원이 같은 사무실 열쇠를 공유하면, 누가 어디에 접근했는지 추적하기 어렵습니다.

- **비용 추적 어려움**: 팀, 프로젝트, 환경별 비용 분리 및 추적이 어려움
  - **쉬운 설명**: 가족 모두가 하나의 신용카드를 사용하면 누가 얼마를 썼는지 구분하기 어렵습니다.

- **서비스 할당량 제한**: AWS 서비스에는 계정별 할당량이 있어 대규모 워크로드에 제약이 생길 수 있음
  - **쉬운 설명**: 한 사람이 인터넷 대역폭을 많이 사용하면 다른 사람들의 인터넷 속도가 느려집니다.

### 다중 계정 전략의 이점

**비유**: 다중 계정 전략은 아파트 단지에서 각 가족이 별도의 아파트를 갖는 것과 같습니다. 각 가족은 자신만의 공간을 가지면서도, 단지 내 공용 시설(수영장, 헬스장 등)을 공유할 수 있습니다.

**주요 이점**:
- **보안 격리 강화**: 계정 간 자연스러운 보안 경계 제공
  - **쉬운 설명**: 개발 환경에서의 실수가 실제 운영 환경에 영향을 미치지 않습니다.
  - **실생활 예시**: 은행에서 테스트용 시스템과 실제 고객 거래 시스템을 완전히 분리하는 것과 같습니다.

- **책임 분리**: 팀, 부서, 프로젝트별로 별도의 계정 할당 가능
  - **쉬운 설명**: 각 부서가 자신의 사무실 공간을 관리하는 것과 같습니다.
  - **실생활 예시**: 회사에서 마케팅팀, 개발팀, 재무팀이 각각 별도의 예산과 공간을 갖는 것과 같습니다.

- **비용 관리 개선**: 계정별 비용 추적 및 할당 용이
  - **쉬운 설명**: 각 가족 구성원이 자신의 신용카드를 사용하면 개인별 지출을 쉽게 추적할 수 있습니다.
  - **실생활 예시**: 회사의 각 부서가 별도의 예산 코드를 사용하여 지출을 추적하는 것과 같습니다.

- **서비스 할당량 최적화**: 계정별로 독립적인 서비스 할당량 제공
  - **쉬운 설명**: 각 가족이 자신만의 인터넷 회선을 가지면 다른 가족의 사용량에 영향을 받지 않습니다.
  - **실생활 예시**: 각 부서가 별도의 회의실을 가지고 있어 다른 부서의 회의 일정에 영향을 받지 않는 것과 같습니다.

- **환경 분리**: 개발, 테스트, 스테이징, 프로덕션 환경을 명확히 분리
  - **쉬운 설명**: 요리사가 새로운 요리를 실험하는 주방과 실제 손님에게 음식을 제공하는 주방을 분리하는 것과 같습니다.
  - **실생활 예시**: 자동차 제조사가 프로토타입 테스트 트랙과 실제 생산 라인을 분리하는 것과 같습니다.

- **거버넌스 향상**: 조직 전체에 일관된 정책 및 표준 적용 가능
  - **쉬운 설명**: 아파트 단지의 모든 세대가 동일한 관리규약을 따르는 것과 같습니다.
  - **실생활 예시**: 회사의 모든 지점이 동일한 보안 정책과 절차를 따르는 것과 같습니다.

## AWS Organizations 소개

### AWS Organizations란?
AWS Organizations는 여러 AWS 계정을 중앙에서 관리하고 통합하기 위한 서비스입니다. 이를 통해 계정 생성 자동화, 계정 그룹화, 중앙 집중식 정책 적용 등을 수행할 수 있습니다.

**비유**: AWS Organizations는 여러 지점을 가진 기업의 본사와 같습니다. 본사는 전체 기업의 정책을 수립하고, 각 지점의 운영을 감독하며, 필요에 따라 새로운 지점을 개설합니다.

**실생활 예시**: 프랜차이즈 본사가 모든 가맹점에 동일한 브랜드 가이드라인, 품질 기준, 운영 절차를 제공하는 것과 같습니다.

### AWS Organizations의 주요 구성 요소

#### 1. 조직 (Organization)
AWS 계정의 최상위 엔티티로, 관리 계정과 여러 멤버 계정으로 구성됩니다.

**쉬운 설명**: 조직은 회사 전체를 나타내며, 모든 부서와 팀을 포함합니다.

#### 2. 관리 계정 (Management Account)
조직을 생성하고 관리하는 계정으로, 이전에는 마스터 계정이라고 불렸습니다.

**쉬운 설명**: 관리 계정은 회사의 CEO 사무실과 같습니다. 전체 조직에 대한 중요한 결정과 정책이 여기서 이루어집니다.

**주의 사항**: 관리 계정은 특별한 권한을 가지므로, 일상적인 워크로드에는 사용하지 않는 것이 좋습니다.

#### 3. 멤버 계정 (Member Account)
조직에 속한 일반 AWS 계정으로, 관리 계정의 관리를 받습니다.

**쉬운 설명**: 멤버 계정은 회사의 각 부서나 팀과 같습니다. 자체적인 업무를 수행하지만 회사의 전체 정책을 따라야 합니다.

#### 4. 조직 단위 (Organizational Unit, OU)
계정을 그룹화하는 컨테이너로, 계층적 구조를 만들 수 있습니다.

**쉬운 설명**: 조직 단위는 회사의 사업부나 부서와 같습니다. 관련된 팀들을 하나의 그룹으로 묶어 관리할 수 있습니다.

**비유**: 조직 단위는 파일 시스템의 폴더와 같습니다. 관련 파일(계정)을 폴더(OU)에 그룹화하고, 폴더 안에 하위 폴더를 만들 수 있습니다.

#### 5. 서비스 제어 정책 (Service Control Policy, SCP)
조직 내 계정에 대한 권한을 중앙에서 제어하는 정책입니다.

**쉬운 설명**: SCP는 회사의 규정집과 같습니다. 모든 직원이 따라야 할 규칙과 제한사항을 정의합니다.

**비유**: SCP는 부모가 자녀의 스마트폰에 설정하는 앱 사용 제한과 같습니다. 특정 앱의 사용을 완전히 차단하거나 사용 시간을 제한할 수 있습니다.

### AWS Organizations의 주요 기능

#### 1. 중앙 집중식 계정 관리
- 계정 생성 및 초대 자동화
- 계정 통합 결제
- 계정 간 리소스 공유

**쉬운 설명**: 한 곳에서 모든 AWS 계정을 관리하고, 통합된 청구서를 받으며, 계정 간에 리소스를 쉽게 공유할 수 있습니다.

#### 2. 계층적 정책 관리
- 서비스 제어 정책(SCP)을 통한 권한 제한
- 태그 정책을 통한 일관된 리소스 태깅
- 백업 정책을 통한 중앙 집중식 백업 관리

**쉬운 설명**: 회사의 모든 부서에 적용되는 기본 규칙을 설정하고, 필요에 따라 특정 부서에 추가 규칙을 적용할 수 있습니다.

#### 3. 통합 결제
- 모든 계정의 사용량 통합
- 볼륨 할인 혜택 공유
- 예약 인스턴스 및 Savings Plans 혜택 공유

**쉬운 설명**: 가족 구성원 모두의 휴대폰 요금을 하나의 가족 요금제로 통합하여 할인 혜택을 받는 것과 같습니다.

#### 4. AWS 서비스와의 통합
- AWS Control Tower와 통합하여 다중 계정 환경 설정 자동화
- AWS IAM Identity Center(이전의 AWS SSO)와 통합하여 중앙 집중식 액세스 관리
- AWS Config, CloudTrail 등과 통합하여 규정 준수 모니터링

**쉬운 설명**: 회사의 인사 시스템, 보안 시스템, 모니터링 시스템이 모두 연결되어 함께 작동하는 것과 같습니다.## 효과적
인 다중 계정 구조 설계

### 다중 계정 구조의 일반적인 모델

#### 1. 기본 구조
가장 기본적인 다중 계정 구조는 다음과 같은 계정으로 구성됩니다:
- **관리 계정**: 조직 관리 전용
- **보안 계정**: 로그 중앙화, 보안 도구 관리
- **로그 아카이브 계정**: 감사 로그 저장
- **공유 서비스 계정**: 공통 서비스 호스팅
- **워크로드 계정**: 실제 애플리케이션 및 서비스 호스팅

**쉬운 설명**: 이것은 마치 아파트 단지에서 관리사무소(관리 계정), 경비실(보안 계정), 문서보관소(로그 아카이브 계정), 공용시설(공유 서비스 계정), 그리고 실제 거주 아파트(워크로드 계정)로 구성된 것과 같습니다.

#### 2. 환경 기반 구조
개발, 테스트, 스테이징, 프로덕션과 같은 환경별로 계정을 분리합니다.

**비유**: 이것은 자동차 제조 과정에서 설계실, 프로토타입 제작실, 품질 테스트실, 그리고 실제 생산 공장을 분리하는 것과 같습니다.

**실생활 예시**: 소프트웨어 회사에서 개발자들이 자유롭게 실험할 수 있는 개발 환경, 품질 테스트를 위한 QA 환경, 그리고 실제 고객이 사용하는 프로덕션 환경을 완전히 분리하는 것과 같습니다.

#### 3. 워크로드 기반 구조
애플리케이션이나 서비스별로 계정을 분리합니다.

**비유**: 이것은 쇼핑몰에서 각 상점이 독립적인 공간을 가지는 것과 같습니다.

**실생활 예시**: 한 회사가 운영하는 여러 웹사이트나 서비스(예: 온라인 쇼핑몰, 고객 지원 포털, 내부 직원 포털)를 각각 별도의 계정에서 운영하는 것과 같습니다.

#### 4. 팀 또는 부서 기반 구조
조직 구조를 반영하여 팀이나 부서별로 계정을 분리합니다.

**비유**: 이것은 회사의 조직도를 그대로 AWS 계정 구조에 반영하는 것과 같습니다.

**실생활 예시**: 마케팅팀, 개발팀, 재무팀, 인사팀이 각각 자신들의 AWS 계정을 가지고 독립적으로 리소스를 관리하는 것과 같습니다.

### 다중 계정 구조 설계 원칙

#### 1. 보안 경계 정의
보안 요구 사항에 따라 계정 경계를 설정합니다.

**쉬운 설명**: 민감한 데이터를 처리하는 시스템은 별도의 계정에 격리하여 보안을 강화합니다.

**실생활 예시**: 은행에서 고객 금융 데이터를 처리하는 시스템을 마케팅 웹사이트와 완전히 분리하는 것과 같습니다.

#### 2. 책임 분리
리소스 소유권과 책임을 명확히 하기 위해 계정을 분리합니다.

**쉬운 설명**: 각 팀이 자신의 리소스에 대한 완전한 책임과 권한을 갖도록 합니다.

**실생활 예시**: 각 부서가 자체 예산으로 사무실 공간을 관리하고 책임지는 것과 같습니다.

#### 3. 비용 추적 최적화
비용 할당 및 추적을 용이하게 하는 계정 구조를 설계합니다.

**쉬운 설명**: 프로젝트, 팀, 환경별로 비용을 쉽게 구분할 수 있도록 계정을 구성합니다.

**실생활 예시**: 가족 구성원마다 별도의 신용카드를 발급받아 개인별 지출을 명확히 추적하는 것과 같습니다.

#### 4. 확장성 고려
조직의 성장에 따라 쉽게 확장할 수 있는 구조를 설계합니다.

**쉬운 설명**: 미래의 성장과 변화를 수용할 수 있는 유연한 구조를 만듭니다.

**실생활 예시**: 아파트를 설계할 때 미래에 가족이 늘어날 것을 고려하여 확장 가능한 공간을 계획하는 것과 같습니다.

#### 5. 운영 효율성 유지
너무 많은 계정으로 인한 관리 복잡성을 피합니다.

**쉬운 설명**: 필요 이상으로 계정을 세분화하면 관리 부담이 증가할 수 있습니다.

**실생활 예시**: 너무 많은 은행 계좌를 개설하면 관리하기 어렵고 전체 재정 상태를 파악하기 어려워지는 것과 같습니다.

## 다중 계정 환경에서의 보안 및 거버넌스

### 중앙 집중식 보안 관리

#### 1. AWS Control Tower
다중 계정 환경을 설정, 구성 및 관리하기 위한 서비스입니다.

**쉬운 설명**: Control Tower는 아파트 단지의 건설 및 관리 시스템과 같습니다. 처음부터 모든 아파트를 표준 설계에 따라 건설하고, 지속적으로 관리 규정을 적용합니다.

**주요 기능**:
- 계정 프로비저닝 자동화
- 가드레일(예방 및 탐지 제어)을 통한 규정 준수 보장
- 대시보드를 통한 규정 준수 모니터링

#### 2. AWS IAM Identity Center (이전의 AWS SSO)
다중 계정 환경에서 중앙 집중식 사용자 관리 및 액세스 제어를 제공합니다.

**쉬운 설명**: IAM Identity Center는 회사의 중앙 출입 카드 시스템과 같습니다. 한 번의 로그인으로 권한에 따라 여러 사무실과 시설에 접근할 수 있습니다.

**주요 기능**:
- 단일 로그인으로 여러 AWS 계정 접근
- 기존 기업 디렉터리(예: Active Directory)와 통합
- 권한 세트를 통한 세분화된 액세스 제어

#### 3. 중앙 집중식 로깅 및 모니터링
모든 계정의 활동을 중앙에서 로깅하고 모니터링합니다.

**쉬운 설명**: 이것은 쇼핑몰의 중앙 보안 관제실과 같습니다. 모든 매장의 CCTV 영상을 한 곳에서 모니터링하고 기록합니다.

**주요 구성 요소**:
- AWS CloudTrail: 모든 계정의 API 활동을 중앙 계정에 로깅
- Amazon GuardDuty: 여러 계정에 걸친 위협 탐지
- AWS Security Hub: 보안 상태 중앙 집중식 관리
- Amazon EventBridge: 계정 간 이벤트 라우팅

### 서비스 제어 정책(SCP) 활용

SCP는 조직 내 계정에 대한 최대 권한을 정의하는 JSON 정책 문서입니다.

**비유**: SCP는 부모가 자녀의 스마트폰에 설정하는 제한과 같습니다. 특정 앱의 사용을 완전히 차단하거나 사용 시간을 제한할 수 있습니다.

**실생활 예시**: 회사에서 모든 직원이 회사 차량을 사용할 수 있지만, 특정 지역을 벗어나거나 과속을 하면 자동으로 제한되는 시스템과 같습니다.

#### SCP 적용 전략

1. **거부 목록(Deny list) 전략**
   - 기본적으로 모든 서비스를 허용하고 특정 서비스나 작업만 거부
   - **쉬운 설명**: "모든 것이 허용되지만, 이것들은 금지됩니다."

2. **허용 목록(Allow list) 전략**
   - 기본적으로 모든 서비스를 거부하고 특정 서비스나 작업만 허용
   - **쉬운 설명**: "모든 것이 금지되지만, 이것들은 허용됩니다."

#### SCP 예시

**민감한 리전 사용 제한**:
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyAllOutsideEURegions",
      "Effect": "Deny",
      "NotAction": [
        "iam:*",
        "organizations:*",
        "route53:*",
        "budgets:*",
        "support:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringNotEquals": {
          "aws:RequestedRegion": [
            "eu-central-1",
            "eu-west-1"
          ]
        }
      }
    }
  ]
}
```

**쉬운 설명**: 이 정책은 "유럽 지역 외의 모든 AWS 리전에서는 글로벌 서비스(IAM, Organizations 등)를 제외한 모든 서비스 사용을 금지합니다"라고 말하는 것과 같습니다.

**실생활 비유**: 이것은 회사 차량이 특정 지역(유럽)을 벗어나면 자동으로 작동이 제한되는 것과 같습니다. 단, 긴급 서비스(글로벌 서비스)는 여전히 사용 가능합니다.

## 다중 계정 환경에서의 비용 관리

### 통합 결제의 이점

AWS Organizations의 통합 결제 기능을 통해 여러 계정의 비용을 중앙에서 관리할 수 있습니다.

**비유**: 통합 결제는 가족 요금제와 같습니다. 모든 가족 구성원의 휴대폰 요금이 하나의 청구서로 통합되고, 총 사용량에 따른 할인 혜택을 받을 수 있습니다.

**주요 이점**:
- **통합된 청구서**: 모든 계정의 비용을 하나의 청구서로 받음
- **사용량 집계**: 모든 계정의 사용량을 합산하여 볼륨 할인 적용
- **예약 인스턴스 및 Savings Plans 공유**: 한 계정에서 구매한 예약 인스턴스나 Savings Plans의 혜택을 다른 계정과 공유
- **비용 할당 태그**: 계정 전체에 일관된 태그 정책을 적용하여 비용 추적 개선

### 계정별 비용 관리 도구

#### 1. AWS Budgets
계정별 또는 조직 수준에서 예산을 설정하고 알림을 구성합니다.

**쉬운 설명**: AWS Budgets는 각 부서나 프로젝트에 대한 예산 한도를 설정하고, 지출이 특정 임계값에 도달하면 알림을 받는 시스템과 같습니다.

#### 2. AWS Cost Explorer
비용 및 사용량 데이터를 시각화하고 분석합니다.

**쉬운 설명**: Cost Explorer는 가계부 앱과 같습니다. 지출 패턴을 그래프로 보여주고, 어디에 돈을 가장 많이 쓰는지 분석할 수 있습니다.

#### 3. AWS Cost and Usage Report
상세한 비용 및 사용량 데이터를 제공합니다.

**쉬운 설명**: 이것은 신용카드 명세서의 상세 내역과 같습니다. 모든 거래와 비용이 항목별로 자세히 기록됩니다.

### 비용 할당 태그 전략

태그는 AWS 리소스에 메타데이터를 할당하는 키-값 쌍입니다. 비용 할당 태그를 사용하여 비용을 세분화하고 추적할 수 있습니다.

**비유**: 태그는 파일 폴더에 붙이는 라벨과 같습니다. 프로젝트, 부서, 환경 등에 따라 리소스를 분류하고 구분할 수 있습니다.

**효과적인 태그 전략**:
- **일관된 태그 키**: 모든 계정에서 동일한 태그 키 사용 (예: "CostCenter", "Project", "Environment")
- **태그 정책 적용**: AWS Organizations의 태그 정책을 사용하여 일관된 태깅 보장
- **자동 태깅**: AWS Service Catalog, CloudFormation 등을 통해 리소스 생성 시 자동 태깅
- **정기적인 검토**: 태그 지정되지 않은 리소스 식별 및 수정

**실생활 예시**: 회사의 모든 경비 영수증에 부서 코드, 프로젝트 번호, 비용 유형 등을 일관되게 기록하여 나중에 쉽게 분류하고 분석할 수 있게 하는 것과 같습니다.

## 다중 계정 환경에서의 리소스 공유

### AWS Resource Access Manager (RAM)

AWS RAM을 사용하면 여러 AWS 계정 간에 특정 AWS 리소스를 안전하게 공유할 수 있습니다.

**비유**: RAM은 아파트 단지의 공용 시설 이용 시스템과 같습니다. 수영장, 헬스장, 회의실 등의 공용 시설을 여러 세대가 공유하되, 이용 권한은 관리사무소에서 제어합니다.

**공유 가능한 주요 리소스**:
- VPC 서브넷
- Transit Gateway
- Route 53 Resolver 규칙
- License Manager 라이선스 구성
- Aurora DB 클러스터
- EC2 전용 호스트

**이점**:
- 리소스 중복 감소
- 중앙 집중식 관리 및 거버넌스
- 비용 절감

**실생활 예시**: 한 회사의 여러 부서가 공통의 데이터베이스, 네트워크 인프라, 또는 라이선스 풀을 공유하는 것과 같습니다.

### 서비스 카탈로그

AWS Service Catalog를 사용하면 조직 전체에서 사용할 수 있는 승인된 IT 서비스 카탈로그를 생성하고 관리할 수 있습니다.

**비유**: Service Catalog는 회사의 사무용품 주문 시스템과 같습니다. 승인된 제품 목록에서 필요한 항목을 선택하면, 회사 정책에 맞게 자동으로 주문 및 배송이 처리됩니다.

**주요 기능**:
- 승인된 제품 포트폴리오 생성
- 제품 버전 관리
- 세분화된 액세스 제어
- 제품 배포 자동화

**실생활 예시**: IT 부서가 승인한 서버 구성, 데이터베이스 설정, 웹 애플리케이션 환경 등을 카탈로그로 제공하여, 개발자들이 필요할 때 쉽게 선택하고 배포할 수 있게 하는 것과 같습니다.

## 결론

다중 계정 전략은 AWS 환경에서 보안, 거버넌스, 비용 관리를 개선하는 핵심 요소입니다. AWS Organizations와 같은 도구를 활용하여 여러 계정을 효과적으로 관리하고, 조직의 요구 사항에 맞는 계정 구조를 설계하는 것이 중요합니다. 적절한 다중 계정 전략을 통해 조직은 클라우드 환경에서 더 높은 보안성, 유연성, 확장성을 달성할 수 있습니다.

**일상 생활의 비유**: 다중 계정 전략은 잘 설계된 도시 계획과 같습니다. 주거 지역, 상업 지역, 공업 지역을 명확히 구분하고, 각 지역에 적합한 규칙을 적용하며, 공공 시설을 효율적으로 공유함으로써 모든 주민이 안전하고 효율적으로 생활할 수 있는 환경을 만드는 것과 같습니다.

## 참고 자료
- [AWS Organizations 사용 설명서](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html)
- [AWS 다중 계정 전략](https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/organizing-your-aws-environment.html)
- [AWS Control Tower 사용 설명서](https://docs.aws.amazon.com/controltower/latest/userguide/what-is-control-tower.html)
- [AWS IAM Identity Center 사용 설명서](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)
- [AWS Resource Access Manager 사용 설명서](https://docs.aws.amazon.com/ram/latest/userguide/what-is.html)