# ID 페더레이션 및 AWS SSO

## 개요
ID 페더레이션은 외부 자격 증명 제공자를 사용하여 AWS 리소스에 대한 액세스를 관리하는 방법입니다. 이를 통해 기존 기업 자격 증명을 활용하여 AWS에 로그인하고 리소스에 액세스할 수 있으므로, 별도의 AWS 자격 증명을 관리할 필요가 없습니다. 이 강의에서는 ID 페더레이션의 개념, SAML 2.0 및 웹 ID 페더레이션, AWS IAM Identity Center(이전 AWS SSO)의 기능 및 구성 방법, 그리고 Active Directory와의 통합에 대해 알아봅니다.

## 학습 목표
- ID 페더레이션의 개념과 이점 이해
- SAML 2.0 및 웹 ID 페더레이션의 작동 방식 학습
- AWS IAM Identity Center의 기능 및 구성 방법 습득
- Active Directory 및 기타 자격 증명 제공자와의 통합 방법 이해
- 페더레이션 사용자를 위한 권한 관리 전략 학습

## ID 페더레이션 개요

### ID 페더레이션이란?
ID 페더레이션은 외부 자격 증명 제공자(IdP)와 서비스 제공자(SP) 간의 신뢰 관계를 설정하여 사용자가 기존 자격 증명으로 다양한 시스템에 액세스할 수 있게 하는 메커니즘입니다.

**비유**: ID 페더레이션은 국제 여행에서 여권을 사용하는 것과 유사합니다. 여권(외부 자격 증명)은 자국(자격 증명 제공자)에서 발급되지만, 다른 국가(서비스 제공자)에서도 신원 확인 수단으로 인정됩니다. 따라서 각 국가마다 별도의 신분증을 발급받을 필요가 없습니다.

**주요 구성 요소**:
- **자격 증명 제공자(IdP)**: 사용자 자격 증명을 저장하고 인증을 수행하는 시스템 (예: Active Directory, Okta, Google)
- **서비스 제공자(SP)**: 사용자에게 서비스를 제공하는 시스템 (예: AWS)
- **신뢰 관계**: IdP와 SP 간에 설정된 상호 신뢰
- **어설션/토큰**: 사용자 인증 및 속성 정보를 포함하는 보안 메시지
- **프로토콜**: SAML, OAuth, OpenID Connect 등 페더레이션을 위한 표준 프로토콜

### ID 페더레이션의 이점
ID 페더레이션은 여러 가지 중요한 이점을 제공합니다.

**보안 강화**:
- 중앙 집중식 자격 증명 관리
- 강력한 인증 정책 적용 (MFA 등)
- 자격 증명 수명 주기 자동화
- 권한 부여 중앙 관리
- 감사 및 규정 준수 간소화

**사용자 경험 개선**:
- 단일 로그인(SSO) 경험
- 자격 증명 수 감소
- 암호 피로 감소
- 일관된 액세스 경험
- 셀프 서비스 기능

**관리 오버헤드 감소**:
- 중복 사용자 계정 제거
- 자격 증명 프로비저닝 자동화
- 액세스 취소 간소화
- 중앙 집중식 정책 관리
- 운영 효율성 향상

**비용 절감**:
- 자격 증명 관리 비용 감소
- 헬프데스크 지원 요청 감소
- 보안 인시던트 위험 및 비용 감소
- 온보딩/오프보딩 프로세스 효율화
- 규정 준수 비용 절감

### AWS에서의 ID 페더레이션 옵션
AWS는 다양한 ID 페더레이션 옵션을 제공합니다.

**SAML 2.0 페더레이션**:
- 엔터프라이즈 자격 증명 제공자와의 통합
- AWS Management Console 및 API 액세스 지원
- IAM 역할 기반 권한 부여
- Active Directory, Okta, OneLogin 등과 통합

**웹 ID 페더레이션**:
- 소셜 및 웹 자격 증명 제공자와의 통합
- 모바일 및 웹 애플리케이션에 적합
- Amazon, Facebook, Google 등과 통합
- Amazon Cognito를 통한 간소화된 구현

**AWS IAM Identity Center**:
- AWS의 권장 SSO 솔루션
- 다중 계정 액세스 관리
- 세분화된 권한 관리
- 내장된 자격 증명 스토어 또는 외부 IdP 통합
- 애플리케이션 액세스 관리

**사용자 지정 자격 증명 브로커**:
- 특수한 요구 사항을 위한 사용자 지정 솔루션
- AWS STS API를 사용한 임시 자격 증명 발급
- 레거시 또는 특수 자격 증명 시스템 통합
- 복잡한 인증 흐름 구현

## SAML 2.0 페더레이션

### SAML 2.0 개요
SAML(Security Assertion Markup Language) 2.0은 자격 증명 제공자와 서비스 제공자 간에 인증 및 권한 부여 데이터를 교환하기 위한 XML 기반 개방형 표준입니다.

**주요 특징**:
- XML 기반 프로토콜
- 엔터프라이즈 SSO 표준
- 웹 브라우저 기반 인증 흐름
- 풍부한 사용자 속성 전송
- 광범위한 업계 지원

**SAML 구성 요소**:
- **어설션**: 사용자에 대한 정보를 포함하는 XML 문서
- **프로토콜**: 어설션을 요청하고 응답하는 방법
- **바인딩**: 프로토콜 메시지를 전송 프로토콜에 매핑하는 방법
- **프로필**: 특정 사용 사례를 위한 SAML 사용 방법

**SAML 어설션 유형**:
- **인증 어설션**: 사용자가 인증되었음을 확인
- **속성 어설션**: 사용자에 대한 추가 정보 제공
- **권한 부여 어설션**: 사용자가 수행할 수 있는 작업 지정

### AWS에서 SAML 2.0 작동 방식
AWS에서 SAML 2.0 페더레이션은 기업 자격 증명 제공자와 AWS 간의 신뢰 관계를 설정하여 작동합니다.

**SAML 인증 흐름**:
1. 사용자가 기업 포털 또는 AWS 액세스 URL에 액세스
2. 사용자가 기업 자격 증명 제공자에 인증
3. 자격 증명 제공자가 SAML 어설션 생성
4. 브라우저가 SAML 어설션을 AWS SAML 엔드포인트로 전송
5. AWS가 SAML 어설션을 검증하고 임시 보안 자격 증명 발급
6. 사용자가 AWS Management Console에 액세스하거나 API 호출 수행

**SAML 인증 흐름 다이어그램**:
```
사용자 → 기업 포털 → IdP 인증 → SAML 어설션 → AWS SAML 엔드포인트 → 임시 자격 증명 → AWS 리소스
```

**AWS 측 구성**:
1. IAM에서 SAML 자격 증명 제공자 생성
2. IdP 메타데이터 문서 업로드
3. SAML 사용자를 위한 IAM 역할 생성
4. 역할에 적절한 권한 정책 연결
5. 역할 신뢰 정책에 SAML 제공자 지정

**IdP 측 구성**:
1. AWS를 서비스 제공자로 구성
2. AWS 메타데이터 문서 가져오기
3. SAML 어설션에 필요한 속성 매핑 구성
4. 사용자 및 그룹에 AWS 액세스 권한 할당
5. SSO 액세스 URL 구성 및 배포

### SAML 구현 예시
일반적인 엔터프라이즈 자격 증명 제공자와 AWS의 SAML 통합 예시입니다.

#### Active Directory Federation Services(AD FS) 통합
**구성 단계**:
1. **AWS 측 구성**:
   - IAM에서 SAML 제공자 생성 및 AD FS 메타데이터 업로드
   - SAML 사용자를 위한 IAM 역할 생성
   - 역할 신뢰 정책 구성

2. **AD FS 측 구성**:
   - AWS를 신뢰 당사자로 추가
   - 클레임 규칙 구성 (NameID, 역할, RoleSessionName)
   - 액세스 제어 정책 구성

3. **테스트 및 배포**:
   - SSO 기능 테스트
   - 사용자 액세스 URL 배포
   - 사용자 교육 및 지원

**IAM 역할 신뢰 정책 예시**:
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Federated": "arn:aws:iam::account-id:saml-provider/ADFS"
      },
      "Action": "sts:AssumeRoleWithSAML",
      "Condition": {
        "StringEquals": {
          "SAML:aud": "https://signin.aws.amazon.com/saml"
        }
      }
    }
  ]
}
```

#### Okta 통합
**구성 단계**:
1. **AWS 측 구성**:
   - IAM에서 SAML 제공자 생성 및 Okta 메타데이터 업로드
   - SAML 사용자를 위한 IAM 역할 생성
   - 역할 신뢰 정책 구성

2. **Okta 측 구성**:
   - AWS 계정 애플리케이션 추가
   - SAML 속성 매핑 구성
   - 그룹 할당 및 역할 매핑
   - 애플리케이션 가시성 및 액세스 설정

3. **테스트 및 배포**:
   - SSO 기능 테스트
   - Okta 대시보드에 AWS 타일 추가
   - 사용자 교육 및 지원

**SAML 속성 매핑**:
- **NameID**: 사용자 이메일 또는 고유 식별자
- **Role**: 사용자가 맡을 수 있는 IAM 역할 ARN
- **RoleSessionName**: AWS에서 사용자를 식별하는 세션 이름

## 웹 ID 페더레이션

### 웹 ID 페더레이션 개요
웹 ID 페더레이션은 Amazon, Facebook, Google과 같은 공개 자격 증명 제공자를 통해 사용자를 인증하고 AWS 리소스에 대한 액세스를 제공하는 방법입니다.

**주요 특징**:
- 소셜 및 웹 자격 증명 제공자 활용
- 모바일 및 웹 애플리케이션에 적합
- OAuth 2.0 및 OpenID Connect 프로토콜 사용
- 최종 사용자 대상 애플리케이션에 이상적
- Amazon Cognito를 통한 간소화된 구현

**주요 구성 요소**:
- **자격 증명 제공자(IdP)**: Amazon, Facebook, Google 등
- **OAuth 2.0/OIDC**: 인증 및 권한 부여 프로토콜
- **ID 토큰**: 사용자 인증 및 속성 정보 포함
- **AWS STS**: 임시 AWS 자격 증명 발급
- **IAM 역할**: 페더레이션 사용자의 권한 정의

**일반적인 사용 사례**:
- 모바일 애플리케이션
- 소비자 대상 웹 애플리케이션
- 게임 및 엔터테인먼트 애플리케이션
- IoT 디바이스 및 애플리케이션
- 서버리스 웹 애플리케이션

### Amazon Cognito
Amazon Cognito는 웹 및 모바일 애플리케이션에 대한 인증, 권한 부여 및 사용자 관리를 제공하는 AWS 서비스입니다.

**주요 구성 요소**:
1. **사용자 풀**:
   - 사용자 디렉터리 및 인증 서비스
   - 사용자 등록 및 로그인 기능
   - 다중 인증(MFA) 지원
   - 소셜 및 SAML 자격 증명 제공자 통합
   - 사용자 속성 및 그룹 관리

2. **자격 증명 풀**:
   - 인증된 사용자에게 AWS 자격 증명 제공
   - 다양한 자격 증명 제공자 지원
   - 인증되지 않은 게스트 액세스 지원
   - IAM 역할 기반 액세스 제어
   - 세분화된 권한 부여

**Cognito 인증 흐름**:
1. 사용자가 애플리케이션에서 로그인 시작
2. 사용자가 Cognito 사용자 풀 또는 외부 IdP에 인증
3. 인증 성공 시 토큰 발급 (ID, 액세스, 갱신 토큰)
4. 애플리케이션이 ID 토큰을 Cognito 자격 증명 풀에 제출
5. 자격 증명 풀이 임시 AWS 자격 증명 발급
6. 애플리케이션이 임시 자격 증명으로 AWS 서비스 액세스

**구현 단계**:
1. **Cognito 사용자 풀 설정**:
   - 사용자 풀 생성 및 구성
   - 앱 클라이언트 설정
   - 자격 증명 제공자 통합 (선택 사항)
   - 사용자 속성 및 정책 구성

2. **Cognito 자격 증명 풀 설정**:
   - 자격 증명 풀 생성
   - 인증된/인증되지 않은 역할 구성
   - 사용자 풀 및 외부 IdP 연결
   - 역할 매핑 규칙 설정

3. **애플리케이션 통합**:
   - AWS SDK 통합
   - 인증 UI 구현 또는 호스팅 UI 사용
   - 토큰 처리 및 관리
   - AWS 서비스 호출

**코드 예시 (JavaScript)**:
```javascript
// 사용자 인증
const cognitoUser = await Auth.signIn(username, password);

// 자격 증명 가져오기
const credentials = await Auth.currentCredentials();

// AWS 서비스 클라이언트 생성
const s3 = new AWS.S3({
  credentials: Auth.essentialCredentials(credentials)
});

// S3 작업 수행
const result = await s3.listBuckets().promise();
```

### 웹 ID 페더레이션 모범 사례
웹 ID 페더레이션을 효과적으로 구현하기 위한 모범 사례입니다.

**보안 모범 사례**:
- 토큰 유효성 검사 및 서명 확인
- 최소 권한 원칙 적용
- 토큰 만료 시간 제한
- 민감한 작업에 추가 인증 요구
- 정기적인 보안 감사 수행

**성능 및 확장성**:
- 토큰 캐싱 구현
- 자격 증명 풀 리전 최적화
- 토큰 갱신 전략 수립
- 오류 처리 및 재시도 로직 구현
- 클라이언트 측 자격 증명 관리 최적화

**사용자 경험**:
- 원활한 인증 흐름 설계
- 다양한 로그인 옵션 제공
- 사용자 친화적인 오류 메시지
- 세션 지속성 관리
- 로그인 상태 명확히 표시

**운영 고려 사항**:
- 로깅 및 모니터링 구현
- 사용자 피드백 메커니즘 제공
- 인증 문제 해결 프로세스 수립
- 정기적인 구성 검토
- 자격 증명 제공자 상태 모니터링

## AWS IAM Identity Center

### IAM Identity Center 개요
AWS IAM Identity Center(이전 AWS SSO)는 AWS 계정 및 애플리케이션에 대한 SSO 액세스를 중앙에서 관리하는 서비스입니다.

**주요 기능**:
- 다중 AWS 계정 액세스 관리
- 비즈니스 애플리케이션 SSO
- 내장된 자격 증명 스토어
- 외부 자격 증명 제공자 통합
- 세분화된 권한 관리
- 사용자 친화적인 액세스 포털

**비유**: IAM Identity Center는 대기업의 중앙 보안 데스크와 같습니다. 직원은 한 번만 신원을 확인하면 보안 데스크에서 다양한 사무실과 시설에 접근할 수 있는 임시 출입 카드를 발급받습니다. 각 출입 카드는 특정 구역에만 접근할 수 있도록 프로그래밍되어 있습니다.

**주요 이점**:
- 중앙 집중식 액세스 관리
- 간소화된 사용자 경험
- 강화된 보안
- 관리 오버헤드 감소
- AWS Organizations와의 통합

### IAM Identity Center 설정 및 구성
IAM Identity Center를 설정하고 구성하는 방법입니다.

**사전 요구 사항**:
- AWS Organizations 활성화
- 관리 계정 또는 위임된 관리자 계정 액세스
- 자격 증명 소스 결정 (내장된 디렉터리 또는 외부 IdP)
- 권한 설정 계획

**설정 단계**:
1. **IAM Identity Center 활성화**:
   - AWS Management Console에서 IAM Identity Center 서비스로 이동
   - "활성화" 버튼 클릭
   - 조직 내 서비스 활성화 확인

2. **자격 증명 소스 선택**:
   - "설정" > "자격 증명 소스" 탭으로 이동
   - 다음 중 하나 선택:
     - IAM Identity Center 디렉터리
     - Active Directory (AWS Managed Microsoft AD 또는 자체 관리형 AD)
     - 외부 자격 증명 제공자 (Okta, Azure AD 등)

3. **사용자 및 그룹 관리**:
   - 내장된 디렉터리를 사용하는 경우:
     - 사용자 및 그룹 생성
     - 사용자 속성 구성
     - 그룹 멤버십 관리
   - 외부 IdP를 사용하는 경우:
     - 사용자 및 그룹 프로비저닝 구성
     - 속성 매핑 설정

4. **권한 세트 생성**:
   - "권한 세트" 탭으로 이동
   - "권한 세트 생성" 클릭
   - 권한 세트 유형 선택:
     - 사전 정의된 권한 세트
     - 사용자 지정 권한 세트
   - 권한 정책 및 설정 구성

5. **AWS 계정 액세스 할당**:
   - "AWS 계정" 탭으로 이동
   - 조직 구조에서 계정 선택
   - 사용자/그룹을 권한 세트에 할당
   - 할당 검토 및 생성

6. **액세스 포털 구성**:
   - 사용자 액세스 포털 URL 확인
   - 포털 설정 사용자 지정 (로고, 색상 등)
   - 사용자에게 액세스 포털 URL 배포

### 권한 세트 및 권한 관리
IAM Identity Center에서 권한을 효과적으로 관리하는 방법입니다.

**권한 세트 개요**:
- 사용자가 AWS 계정에서 가질 수 있는 권한 정의
- 여러 계정에 일관되게 적용 가능
- IAM 역할로 프로비저닝
- 세션 기간 및 릴레이 상태 구성 포함

**권한 세트 유형**:
1. **사전 정의된 권한 세트**:
   - AdministratorAccess
   - PowerUserAccess
   - ReadOnlyAccess
   - 기타 AWS 관리형 정책 기반 세트

2. **사용자 지정 권한 세트**:
   - 고객 관리형 정책 사용
   - 인라인 정책 정의
   - 권한 경계 설정
   - 특정 요구 사항에 맞게 조정

**권한 할당 모델**:
- **사용자 기반 할당**: 개별 사용자에게 직접 권한 할당
- **그룹 기반 할당**: 그룹 멤버십을 통한 권한 할당 (권장)
- **속성 기반 액세스 제어(ABAC)**: 사용자 속성에 따른 동적 권한

**권한 관리 모범 사례**:
- 그룹 기반 할당 사용
- 역할 기반 권한 세트 생성
- 최소 권한 원칙 적용
- 권한 세트 정기적 검토
- 권한 변경 문서화 및 감사

**권한 세트 예시**:
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DeveloperPermissions",
      "Effect": "Allow",
      "Action": [
        "ec2:Describe*",
        "s3:Get*",
        "s3:List*",
        "dynamodb:Describe*",
        "dynamodb:List*",
        "cloudwatch:Get*",
        "cloudwatch:List*"
      ],
      "Resource": "*"
    }
  ]
}
```

### 애플리케이션 통합
IAM Identity Center를 통해 비즈니스 애플리케이션에 대한 SSO 액세스를 관리하는 방법입니다.

**지원되는 애플리케이션 유형**:
1. **클라우드 애플리케이션**:
   - SAML 2.0 지원 애플리케이션
   - 사전 통합된 애플리케이션 (Salesforce, Office 365 등)
   - 사용자 지정 SAML 애플리케이션

2. **온프레미스 애플리케이션**:
   - SAML 2.0 지원 애플리케이션
   - 애플리케이션 프록시 또는 VPN을 통한 액세스
   - 하이브리드 환경 통합

**애플리케이션 추가 단계**:
1. IAM Identity Center 콘솔에서 "애플리케이션" 탭으로 이동
2. "애플리케이션 추가" 클릭
3. 애플리케이션 유형 선택:
   - AWS 관리형 애플리케이션
   - 사용자 지정 SAML 2.0 애플리케이션
4. 애플리케이션 세부 정보 및 메타데이터 구성
5. 속성 매핑 설정
6. 사용자 및 그룹 할당
7. 애플리케이션 테스트 및 배포

**속성 매핑**:
- 사용자 속성을 애플리케이션 속성에 매핑
- 일반적인 매핑: 이메일, 이름, 성, 역할, 그룹
- 애플리케이션별 요구 사항에 따른 사용자 지정 매핑
- 변환 함수를 통한 고급 매핑

**사용자 경험**:
- 단일 액세스 포털에서 모든 애플리케이션 액세스
- 원클릭 애플리케이션 시작
- 자동 로그인 (추가 자격 증명 불필요)
- 모바일 및 데스크톱 액세스 지원
- 최근 및 즐겨찾는 애플리케이션 표시

## Active Directory 통합

### Active Directory 통합 옵션
AWS와 Active Directory를 통합하는 다양한 방법입니다.

**통합 옵션 개요**:
1. **AWS Managed Microsoft AD**:
   - AWS에서 완전 관리형 Active Directory
   - 기존 AD와 신뢰 관계 설정 가능
   - AWS 서비스와 긴밀한 통합
   - 다중 리전 복제 지원

2. **AD Connector**:
   - 기존 온프레미스 AD에 대한 프록시
   - 디렉터리 데이터 복제 없음
   - 인증 요청을 온프레미스 AD로 리디렉션
   - 경량 통합 옵션

3. **Simple AD**:
   - Samba 4 기반의 기본 AD 호환 서비스
   - 소규모 워크로드에 적합
   - 제한된 AD 기능
   - 온프레미스 AD와 통합 불가

4. **자체 관리형 AD**:
   - EC2 인스턴스에 직접 AD 배포
   - 완전한 제어 및 사용자 지정
   - 관리 오버헤드 증가
   - 고가용성 구성 필요

**선택 기준**:
- 기존 AD 인프라 유무
- 필요한 AD 기능 및 호환성
- 관리 오버헤드 선호도
- 확장성 및 성능 요구 사항
- 예산 및 비용 고려 사항

### IAM Identity Center와 Active Directory 통합
IAM Identity Center를 Active Directory와 통합하여 기존 기업 자격 증명을 활용하는 방법입니다.

**통합 옵션**:
1. **AWS Managed Microsoft AD 통합**:
   - IAM Identity Center에서 "자격 증명 소스" 설정
   - AWS Managed Microsoft AD 선택
   - 디렉터리 선택 및 구성
   - 사용자 및 그룹 동기화 설정

2. **자체 관리형 디렉터리 통합**:
   - AD Connector 설정
   - IAM Identity Center에서 "자격 증명 소스" 설정
   - AD Connector 선택
   - 동기화 설정 구성

**사용자 및 그룹 동기화**:
- 동기화할 사용자 및 그룹 범위 정의
- 속성 매핑 구성
- 동기화 일정 설정
- 동기화 모니터링 및 문제 해결

**인증 흐름**:
1. 사용자가 IAM Identity Center 포털에 액세스
2. 사용자가 AD 자격 증명으로 로그인
3. IAM Identity Center가 AD에 인증 요청 전송
4. AD가 인증 확인 및 사용자 속성 반환
5. IAM Identity Center가 적절한 권한 및 액세스 제공

**모범 사례**:
- AD 보안 그룹을 활용한 액세스 관리
- 정기적인 동기화 상태 확인
- 사용자 프로비저닝/디프로비저닝 프로세스 자동화
- AD 및 IAM Identity Center 간 속성 일관성 유지
- 문제 해결을 위한 로깅 및 모니터링 구성

### 하이브리드 ID 관리
온프레미스 및 클라우드 환경에서 자격 증명을 효과적으로 관리하는 전략입니다.

**하이브리드 ID 아키텍처**:
- **중앙 ID 저장소**: 일반적으로 온프레미스 AD
- **클라우드 ID 서비스**: IAM Identity Center, Azure AD 등
- **동기화 메커니즘**: AD Connect, SCIM 등
- **인증 프로토콜**: SAML, OAuth/OIDC
- **SSO 인프라**: 페더레이션 서비스, ID 브로커

**일반적인 하이브리드 시나리오**:
1. **온프레미스 AD + AWS Managed Microsoft AD**:
   - 양방향 신뢰 관계
   - AD 복제 및 동기화
   - IAM Identity Center 통합

2. **온프레미스 AD + AD Connector**:
   - 프록시 기반 통합
   - 인증 요청 리디렉션
   - 최소한의 클라우드 인프라

3. **외부 IdP + IAM Identity Center**:
   - Okta, Azure AD 등과 통합
   - SAML 기반 페더레이션
   - 클라우드 중심 접근 방식

**모범 사례**:
- 명확한 ID 수명 주기 프로세스 정의
- 자동화된 프로비저닝/디프로비저닝 구현
- 강력한 인증 정책 적용 (MFA 등)
- 정기적인 액세스 검토 및 감사
- 재해 복구 및 비즈니스 연속성 계획 수립

## 페더레이션 사용자를 위한 권한 관리

### 권한 관리 전략
페더레이션 사용자에게 효과적으로 권한을 할당하고 관리하는 전략입니다.

**권한 모델 옵션**:
1. **역할 기반 액세스 제어(RBAC)**:
   - 사전 정의된 역할에 권한 할당
   - 사용자를 역할에 할당
   - 간단하고 이해하기 쉬움
   - 대부분의 조직에 적합

2. **속성 기반 액세스 제어(ABAC)**:
   - 사용자 및 리소스 속성에 기반한 동적 권한
   - 정책에 조건 사용
   - 세분화된 액세스 제어
   - 관리 오버헤드 감소

3. **하이브리드 접근 방식**:
   - RBAC와 ABAC 결합
   - 기본 역할 + 속성 기반 세분화
   - 유연성과 관리 용이성 균형
   - 복잡한 조직에 적합

**권한 설계 원칙**:
- 최소 권한 원칙 적용
- 직무 분리 구현
- 권한 에스컬레이션 경로 제한
- 임시 권한 및 Just-In-Time 액세스 활용
- 정기적인 권한 검토 및 조정

### ABAC(속성 기반 액세스 제어)
속성 기반 액세스 제어는 사용자 및 리소스 속성을 기반으로 권한을 동적으로 결정하는 방법입니다.

**ABAC의 이점**:
- 정책 수 감소
- 운영 변경 감소
- 확장성 향상
- 세분화된 권한
- 유연한 액세스 제어

**AWS에서의 ABAC 구현**:
- IAM 정책의 조건 요소 사용
- 태그 기반 액세스 제어
- 세션 태그 및 전이적 태그 활용
- IAM Identity Center의 속성 매핑

**ABAC 정책 예시**:
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["ec2:StartInstances", "ec2:StopInstances"],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:ResourceTag/Department": "${aws:PrincipalTag/Department}"
        }
      }
    }
  ]
}
```

**ABAC 구현 단계**:
1. 속성 체계 정의 (사용자 및 리소스)
2. IdP에서 속성 매핑 구성
3. 속성 기반 IAM 정책 생성
4. 리소스 태그 지정 전략 구현
5. 속성 전파 및 검증 메커니즘 설정

### 권한 경계 및 가드레일
권한 경계와 가드레일은 페더레이션 사용자에게 부여할 수 있는 최대 권한을 제한하는 메커니즘입니다.

**권한 경계**:
- IAM 엔터티가 가질 수 있는 최대 권한 설정
- 권한을 부여하지 않고 상한선 설정
- 권한 위임 시나리오에서 유용
- IAM 역할 및 사용자에 적용 가능

**서비스 제어 정책(SCP)**:
- AWS Organizations 수준에서 적용
- 조직 내 모든 계정에 대한 가드레일
- 계정 관리자 포함 모든 사용자에게 적용
- 계정 간 일관된 제어 적용

**세션 정책**:
- 역할 수임 시 전달되는 인라인 정책
- 역할 권한을 추가로 제한
- 임시 세션에만 적용
- 동적 권한 제한에 유용

**권한 제한 계층**:
1. 서비스 제어 정책 (조직 수준)
2. 권한 경계 (역할/사용자 수준)
3. 자격 증명 기반 정책 (역할/사용자에 연결)
4. 세션 정책 (임시 세션에 적용)
5. 리소스 기반 정책 (리소스에 연결)

**모범 사례**:
- 다중 방어 계층으로 권한 제한
- 권한 에스컬레이션 경로 차단
- 중요한 리소스 및 작업 보호
- 정기적인 권한 감사 및 검토
- 최소 권한 원칙 적용

## 결론
ID 페더레이션은 AWS 환경에서 자격 증명 및 액세스 관리를 간소화하고 보안을 강화하는 강력한 방법입니다. SAML 2.0 페더레이션, 웹 ID 페더레이션, AWS IAM Identity Center를 통해 기존 기업 자격 증명 또는 소셜 자격 증명을 활용하여 AWS 리소스에 안전하게 액세스할 수 있습니다. Active Directory와의 통합 및 효과적인 권한 관리 전략을 구현함으로써 중앙 집중식 자격 증명 관리, 향상된 보안, 개선된 사용자 경험, 그리고 운영 효율성을 달성할 수 있습니다.

## 참고 자료
- [AWS IAM Identity Center 사용 설명서](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)
- [AWS에서 SAML 2.0 페더레이션](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html)
- [Amazon Cognito 개발자 안내서](https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html)
- [AWS Directory Service 관리 안내서](https://docs.aws.amazon.com/directoryservice/latest/admin-guide/what_is.html)
- [AWS에서 ABAC 사용](https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html)