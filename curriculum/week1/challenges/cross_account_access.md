# 주간 챌린지: 다중 계정 환경에서 교차 계정 액세스 구현

## 개요
이 챌린지에서는 AWS Organizations와 IAM 역할을 활용하여 다중 계정 환경을 구성하고 교차 계정 액세스를 구현합니다. 개발 계정과 운영 계정 간의 안전한 액세스 메커니즘을 설계하고, 최소 권한 원칙에 따라 개발자들이 필요한 경우에만 운영 환경에 제한된 액세스를 할 수 있도록 구성합니다.

## 학습 목표
- AWS Organizations를 사용한 다중 계정 환경 구성 방법 습득
- 교차 계정 IAM 역할 및 정책 설계 방법 이해
- 최소 권한 원칙에 따른 교차 계정 액세스 구현 방법 학습
- 교차 계정 액세스 감사 및 모니터링 구성 방법 습득

## 시나리오
당신은 기업의 클라우드 아키텍트로, 개발 계정과 운영 계정 간의 안전한 액세스 메커니즘을 구현해야 합니다. 개발자들이 필요한 경우에만 운영 환경에 제한된 액세스를 할 수 있도록 설계해야 합니다. 이를 위해 AWS Organizations를 사용하여 계정 구조를 설정하고, 교차 계정 IAM 역할을 통해 안전한 액세스를 제공해야 합니다.

## 요구 사항

### 1. AWS Organizations 구성
- AWS Organizations 설정
- 최소 2개의 계정 구성 (개발, 운영)
- 조직 단위(OU) 구조 설계 및 구현
- 서비스 제어 정책(SCP) 구성

### 2. 교차 계정 IAM 역할 설계
- 운영 계정에 다음 역할 생성:
  - **ReadOnly 역할**: 모든 리소스에 대한 읽기 전용 액세스
  - **DevOps 역할**: 특정 리소스에 대한 제한된 관리 액세스
  - **Emergency 역할**: 긴급 상황에서 사용할 수 있는 광범위한 액세스
- 각 역할에 대한 신뢰 정책 구성 (개발 계정의 특정 IAM 사용자/역할만 수임 가능)
- 각 역할에 대한 권한 경계 설정

### 3. 최소 권한 원칙 적용
- 각 역할에 필요한 최소한의 권한만 부여
- 조건 키를 사용하여 액세스 제한 (시간 기반, IP 기반, 태그 기반 등)
- 리소스 수준 권한 구성
- 권한 경계를 통한 최대 권한 제한

### 4. 역할 전환 메커니즘 구현
- 개발 계정의 IAM 그룹 및 사용자 생성
- 각 그룹에 적절한 역할 전환 권한 부여
- AWS Management Console을 통한 역할 전환 구성
- AWS CLI 및 SDK를 통한 역할 전환 구성

### 5. 교차 계정 액세스 감사 및 모니터링
- CloudTrail을 사용하여 교차 계정 활동 로깅
- CloudWatch 경보 구성 (특정 역할 사용 시 알림)
- IAM Access Analyzer를 사용한 외부 액세스 분석
- 교차 계정 액세스 보고서 생성

### 6. 긴급 액세스 프로세스 문서화
- 긴급 상황에서의 액세스 요청 및 승인 프로세스
- 긴급 액세스 사용 후 검토 프로세스
- 액세스 로그 분석 및 보고 절차
- 긴급 액세스 권한 취소 절차

## 제출 요구 사항

### 1. GitHub 저장소
- 모든 코드 및 문서를 포함하는 GitHub 저장소 생성
- README.md 파일에 프로젝트 개요 및 설정 지침 포함

### 2. 아키텍처 문서
- 다중 계정 아키텍처 다이어그램
- AWS Organizations 구조 설명
- IAM 역할 및 정책 설계 문서
- 교차 계정 액세스 흐름 설명

### 3. IAM 정책 및 역할 JSON 파일
- 생성한 모든 IAM 역할의 신뢰 정책 및 권한 정책 JSON 파일
- 서비스 제어 정책(SCP) JSON 파일
- 권한 경계 정책 JSON 파일

### 4. 구성 스크립트
- AWS CLI 또는 AWS CloudFormation 템플릿을 사용한 구성 스크립트
- 스크립트 실행 지침 및 사전 요구 사항
- 오류 처리 및 롤백 메커니즘

### 5. 테스트 결과
- 교차 계정 액세스 테스트 계획 및 시나리오
- 테스트 결과 및 스크린샷
- 발견된 문제 및 해결 방법

### 6. 보안 및 감사 문서
- 교차 계정 액세스 감사 구성 설명
- CloudTrail 및 CloudWatch 설정 문서
- 보안 모니터링 대시보드 설계 (선택 사항)
- 보안 이벤트 대응 계획

## AWS 계정 액세스 제공
- 강사가 구성을 검토할 수 있도록 ReadOnlyAccess 역할 생성
- 역할 ARN 제공 또는 임시 액세스 키 공유 (안전한 방법으로)

## 평가 기준

### 아키텍처 설계 품질 (30%)
- AWS Organizations 구조의 논리성
- IAM 역할 및 정책 설계의 적절성
- 교차 계정 액세스 흐름의 효율성
- 확장성 및 유지 관리성

### 보안 구성의 적절성 (30%)
- 신뢰 정책 구성의 정확성
- 권한 경계 및 SCP 구현
- 조건부 액세스 제어 구현
- 감사 및 모니터링 구성

### 최소 권한 원칙 적용 (30%)
- 역할별 권한 범위의 적절성
- 과도한 권한 부여 방지
- 조건 키를 통한 액세스 제한
- 리소스 수준 권한 구현

### 문서화 품질 (10%)
- 문서의 명확성 및 완전성
- 다이어그램 및 설명의 정확성
- 구성 및 테스트 지침의 상세성
- 문제 해결 및 유지 관리 지침

## 보너스 과제 (추가 점수)

### 1. AWS Control Tower 통합
- AWS Control Tower를 사용한 다중 계정 환경 구성
- 가드레일 구현 및 문서화
- 계정 프로비저닝 자동화

### 2. 고급 모니터링 및 알림
- AWS Config를 사용한 규정 준수 모니터링
- Amazon EventBridge를 사용한 이벤트 기반 알림
- AWS Security Hub 통합

### 3. 자동화된 액세스 검토 프로세스
- 정기적인 액세스 검토 자동화 스크립트
- 미사용 역할 및 권한 식별
- 액세스 검토 보고서 자동 생성

## 이스터 에그 (숨겨진 과제)
이 챌린지에는 숨겨진 이스터 에그가 포함되어 있습니다. 이를 찾아 구현하면 추가 점수를 받을 수 있습니다. 힌트: 교차 계정 액세스 로그 분석과 관련이 있습니다.

## 참고 자료
- [AWS Organizations 사용 설명서](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html)
- [IAM 역할을 사용한 교차 계정 액세스](https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_cross-account-with-roles.html)
- [AWS 다중 계정 전략](https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/organizing-your-aws-environment.html)
- [AWS Control Tower 사용 설명서](https://docs.aws.amazon.com/controltower/latest/userguide/what-is-control-tower.html)

## 제출 마감일
2주차 수요일 오전 9시까지 GitHub 저장소 URL을 제출하세요.

## 질문 및 지원
챌린지 관련 질문이나 기술적 문제가 있는 경우, 강의 시간 중에 질문하거나 이메일로 문의하세요.